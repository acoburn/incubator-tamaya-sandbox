#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy current the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!--
// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy current the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
// -->
------
configuration:
  formats:
    - format: yaml
    - format: json
  converters:
    - converter: AllInOneConverter
  filters:
    - filter: UsageTrackerFilter

  context:
    - stage: ${properties:system:STAGE?default=DEV}
    - app: ${properties:system.APP?default=NONE}
    - context: ${java:org.apache.tamaya.context.Context#id()}
    - company: Trivadis

  sources:
    - ENVIRONMENT:
        uri: properties:environment
        enabled: ${stage=TEST || stage=PTA || stage=PROD}
        decorator:
          - maped-to: ENV.
          - secured:
              roles: admin,power-user
              policy: mask
    - SYSPROPS:
        uri: properties:system
    - FILE:config.json:
        uri: file:/./config.json
        name: FILE:config.json
        observe: true
        observe-period: 20000
    - CP:config.yml:
        uri: classpath*://META-INF/application-config.yml
    - MINE:
        uri: propertysource:ch.mypack.MyClassSource
        locale=de
    - <include>:
        resource: TEST-config.xml
        enabled: ${context.cstage==TEST}
    - CONFIG-DIR:
        uri: dir:/${CONFIG-DIR}/**/*.json
    - SERVER:
        uri: https://www.confdrive.com/cfg/customerId=${}
        params:
          - locale: de





