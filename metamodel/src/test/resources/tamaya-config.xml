<!--
// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy current the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
// -->
<configuration>
    <formats>
        <format name="yaml"/>
        <format name="json"/>
    </formats>
    <!--<converters>-->
    <!--<converter type="AllInOneConverter"/>-->
    <!--</converters>-->
    <filters>
        <filter type="UsageTrackerFilter"/>
    </filters>

    <context>
        <context-entry name="stage">${properties:system:STAGE?default=DEV}</context-entry>
        <context-entry name="app">${properties:system.APP?default=NONE}</context-entry>
        <context-entry name="context">${java:org.apache.tamaya.context.Context#id()}</context-entry>
        <context-entry name="company">Trivadis</context-entry>
    </context>

    <sources>
       <source enabled="${stage=TEST || stage=PTA || stage=PROD}"
           uri="properties:environment">
           <decorator name="maped-to">ENV.</decorator>
           <decorator name="secured">
               <param name="roles">admin,power-user</param>
               <param name="policy">mask</param>
           </decorator>
       </source>
       <source uri="properties:system"/>
       <source name="FILE:config.json" observe="true" observe-period="20000"
               uri="file:/./config.json" />
       <source name="CP:config.yml" uri="classpath*://META-INF/application-config.yml"/>
       <source name="MINE" uri="propertysource:ch.mypack.MyClassSource">
           <param name="locale">de</param>
        </source>
       <include enabled="${context.cstage==TEST}">TEST-config.xml</include>
       <source name="CONFIG-DIR" uri="dir:/${CONFIG-DIR}/**/*.json"/>
        <source name="SERVER" uri="https://www.confdrive.com/cfg/customerId=${}">
            <param name="locale">de</param>
        </source>
    </sources>

</configuration>

